<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://live.zwidgets.com/js-sdk/1.1/ZohoEmbededAppSDK.min.js"></script>
  <script>
    /*
     * Subscribe to the EmbededApp onPageLoad event before initializing
     */
    
    ZOHO.embeddedApp.on("PageLoad", function (data) {
      var id = data.EntityId,
          module = data.Entity;

      ZOHO.CRM.API.getRecord({ Entity: module, RecordID: id })
        .then(function (data) {
          console.log(data);
          var laId=data.data[0].id;
          var theEndpoint=window.location.href;
          theEndpoint=theEndpoint.split("?endpoint=")[1];
          window.location=theEndpoint+laId;
        });
    });
    /*
     * Initialize the widget and start listening to CRM events.
     */
    ZOHO.embeddedApp.init();
  </script>
</head>
<body>
  <div>
    Loading...
  </div>
</body>
</html>